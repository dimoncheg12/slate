# Checkout

## Payment url (host-to-host)

> Example:

```php
<?php
  require 'vendor/autoload.php';
  
  \Cloudipsp\Configuration::setMerchantId(1396424);
  \Cloudipsp\Configuration::setSecretKey('test');
  $data = [
        'order_desc' => 'tests SDK',
        'currency' => 'USD',
        'amount' => 1000,
        'response_url' => 'http://site.com/responseurl',
        'server_callback_url' => 'http://site.com/callbackurl',
        'sender_email' => 'test@fondy.eu',
        'lang' => 'ru',
        'product_id' => 'some_product_id',
        'lifetime' => 36000,
        'merchant_data' => array(
            'custom_data1' => 'Some string',
            'custom_data2' => '00000000000',
            'custom_data3' => '3!@#$%^&(()_+?"}'
        )
    ];
  $url = \Cloudipsp\Checkout::url($data);
  $data = $url->getData();
```

```(array)``` <span class="green">getData()</span> — returns checkout url data.

```(null)``` <span class="green">toCheckout()</span> — redirect to checkout page.

Required request Parameters:

Parameters      | Description                                                                                      
----------------|-------------------------------------------------------------------------------------------------------
```order_id```        | Order ID. Can be generated by SDK.                                                               
```merchant_id```     | Merchant unique ID.                                           
```order_desc```      | Order description. Generated by merchant in UTF-8. Can be generated by SDK.                       
```signature```       | Order signature. Required to verify merchant request consistency and authenticity. Can be generated by SDK.
```amount```	        | Order amount in cents without a separator.
```currency```     | Order currency(USD, EUR, RUB and others).  


<aside class="notice">
<p class="nothing">
merchant_data — will be converted to json string.<br/>
reservation_data — will be converted to json string and encoded base64.<br/>
Method accepted protocol <b>2.0</b>.<br/>
Response is always returned in request context in the same content-type. So if request is sent in JSON, response will be sent in JSON format too.
</p>
</aside>

Host-to-host API supports the following text formats:

* form
* xml 
* json

**All other parameters look in provider documentation.**

## Payment form

> Example:

```php
<?php
  require 'vendor/autoload.php';
  
  \Cloudipsp\Configuration::setMerchantId(1396424);
  \Cloudipsp\Configuration::setSecretKey('test');
  $data = [
        'order_desc' => 'tests SDK',
        'currency' => 'USD',
        'amount' => 1000,
        'merchant_data' => [
            'custom_data1' => 'Some string'
        ]
    ];
  $form = \Cloudipsp\Checkout::form($data);
```

```(string)``` returns payment form as string.

Required request Parameters:

Parameters      | Description                                                                                      
----------------|-------------------------------------------------------------------------------------------------------
```order_id```        | Order ID. Can be generated by SDK.                                                               
```merchant_id```     | Merchant unique ID.                                           
```order_desc```      | Order description. Generated by merchant in UTF-8. Can be generated by SDK.                       
```signature```       | Order signature. Required to verify merchant request consistency and authenticity. Can be generated by SDK.
```amount```	        | Order amount in cents without separator.
```currency```        | Order currency(USD,EUR,RUB and others).  


**All other parameters look in provider documentation.**

## Payment token (host-to-host)
> Example:

```php
<?php
  require 'vendor/autoload.php';
  
  \Cloudipsp\Configuration::setMerchantId(1396424);
  \Cloudipsp\Configuration::setSecretKey('test');
  $data = [
        'order_desc' => 'tests SDK',
        'currency' => 'USD',
        'amount' => 1000,
        'response_url' => 'http://site.com/responseurl',
        'server_callback_url' => 'http://site.com/callbackurl',
        'sender_email' => 'test@fondy.eu',
        'lang' => 'ru',
        'product_id' => 'some_product_id',
        'lifetime' => 36000,
        'merchant_data' => array(
            'custom_data1' => 'Some string',
            'custom_data2' => '00000000000',
            'custom_data3' => '3!@#$%^&(()_+?"}'
        )
    ];
  $token = \Cloudipsp\Checkout::token($data);
  $data = $url->getData();
```

```(array)``` <span class="green">getData()</span> returns checkout token data.

Required request parameters:

<aside class="notice">
Look <a href="#payment-url-host-to-host">Payment url</a>
</aside>
