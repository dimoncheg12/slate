# PCIDSS Accept purchase

## Step One

> Example 3ds card:

```php
<?php
  require 'vendor/autoload.php';

   \Cloudipsp\Configuration::setMerchantId(1396424);
   \Cloudipsp\Configuration::setSecretKey('test');
   $TestOrderData = [
           'order_id' => time(),
           'card_number' => '4444555566661111', //testing card with 3ds
           'cvv2' => '333',
           'expiry_date' => '1232',
           'currency' => 'USD',
           'amount' => 1000,
           'client_ip' => '127.2.2.1'
   ];
   //Call method to generate order
   $orderData = Cloudipsp\Pcidss::start($TestOrderData);
   if($orderData->is3ds())
      $form = \Cloudipsp\Pcidss::get3dsFrom($orderData->getData(), $response_url . 'response_url');
```
<aside class="warning"><p class="nothing">
Only for PCIDSS compliant merchants.<br/>
If card is 3ds a merchant receiving this response must build an HTML form and using it submit customer to acs_url.
</p></aside>

```(array)``` <span class="green">getData()</span> — returns payment data.

```(bool)``` <span class="green">is3ds()</span> — check if is 3ds response.

```(string)``` <span class="green">get3dsFrom($responseData, 'response_url')</span> — generating form for step two if 3ds response.


Required request Parameters:

Parameters      | Description
----------------|-------------------------------------------------------------------------------------------------------
```order_id```        | Order ID which is generated by merchant.
```merchant_id```     | Merchant unique ID.
```signature```       | Order signature. Required to verify merchant request consistency and authenticity. Can be generated by SDK.
```currency```     | Order currency(USD, EUR, RUB and others).
```amount```	        | Order amount in cents without separator.
```card_number```     | Card number.
```cvv2```	        | CVV card code.
```expiry_date```	        | Expaire date of card format 'MMYY'.
```client_ip```	        | Client IP.

Host-to-host API supports the following text formats:

* form
* xml
* json

## Step Two

> Example 3ds card:

```php
<?php
  require 'vendor/autoload.php';

   \Cloudipsp\Configuration::setMerchantId(1396424);
   \Cloudipsp\Configuration::setSecretKey('test');
   if (!empty($_POST)) {
       $dataTo3dsSubmit = $_POST;
       $dataTo3dsSubmit['order_id'] = 'order_id_from_prev_step'; // adding order id from prev step
       $orderData = \Cloudipsp\Pcidss::submit($dataTo3dsSubmit);
   }
```
Submitting result generated form from step one

```(array)``` <span class="green">getData()</span> — returns payment data.

Host-to-host API supports the following text formats

* form
* xml
* json
