# Card verification

## Payment card verification url

> Example:

```php
<?php
  require 'vendor/autoload.php';
  
  \Cloudipsp\Configuration::setMerchantId(1396424);
  \Cloudipsp\Configuration::setSecretKey('test');
  $data = [
        'verification_type' => 'code', //default - amount
        'currency' => 'USD',
        'amount' => 100
  ];
  $url = \Cloudipsp\Verification::url($data);
  $data = $url->getData();
```
Request must contain additional parameter verification and verification_type

```(array)``` <span class="green">getData()</span> - returns verification url data.

```(null)``` <span class="green">toCheckout()</span> - redirect to verification page.

Required request parameters:

parameters      | Description                                                                                      
----------------|-------------------------------------------------------------------------------------------------------
```order_id```        | Order ID. Can be generated by SDK.                                                               
```merchant_id```     | Merchant unique ID.                                           
```order_desc```      | Order description. Generated by merchant in UTF-8. Can be generated by SDK.                       
```signature```       | Order signature. Required to verify merchant request consistency and authenticity. Can be generated by SDK.
```verification```	        | If Y order will be automatically reversed by FONDY after successful approval.
```verification_type```	        | 'code' or 'amount'. Default is amount.
```currency```     | Order currency(USD, EUR, RUB and others).
```amount```	        | Order amount in cents without separator. 


Host-to-host API supports the following text formats:

* form
* xml 
* json

**All other params look in provider documentation.**

## Payment verification form

> Example:

```php
<?php
  require 'vendor/autoload.php';
  
  \Cloudipsp\Configuration::setMerchantId(1396424);
  \Cloudipsp\Configuration::setSecretKey('test');
  $data = [
          'verification_type' => 'code', //default - amount
          'currency' => 'USD',
          'amount' => 100
  ];
  $form = \Cloudipsp\Verification::form($data);
```

```(string)``` returns payment form as string.

Required request parameters:

parameters      | Description                                                                                      
----------------|-------------------------------------------------------------------------------------------------------
```order_id```        | Order ID. Can be generated by SDK.                                                               
```merchant_id```     | Merchant unique ID.                                           
```order_desc```      | Order description. Generated by merchant in UTF-8. Can be generated by SDK.                       
```signature```       | Order signature. Required to verify merchant request consistency and authenticity. Can be generated by SDK.
```amount```	        | Order amount in cents without separator.
```currency```        | Order currency(USD,EUR,RUB and others).
```verification```	        | If Y order will be automatically reversed by FONDY after successful approval.
```verification_type```	        | 'code' or 'amount'. Default is amount. 


**All other params look in provider documentation.**
