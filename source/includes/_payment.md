# Payments

## Payment reports

> Example:

```php
<?php
  require 'vendor/autoload.php';
  
  \Cloudipsp\Configuration::setMerchantId(1396424);
  \Cloudipsp\Configuration::setSecretKey('test');
  $Data = [
        "date_from" => date('d.m.Y H:i:s', time() - 3600),
        "date_to" => date('d.m.Y H:i:s'),
  ];
  $reports = \Cloudipsp\Payment::reports($Data);
  var_dump($reports->getData());
```   
<aside class="warning">
Request date format is 'd.m.Y H:i:s'
</aside>     

```(array)``` <span class="green">getData()</span> - Returns payment report data.

Required request Parameters:

Parameters      | Description                                                                                      
----------------|-------------------------------------------------------------------------------------------------------                                                   
```merchant_id```     | Merchant unique ID.                                                                
```signature```       | Order signature. Required to verify merchant request consistency and authenticity. Can be generated by SDK.
```date_from```       | Start order datetime.
```date_to```	        | End order datetime.

Host-to-host API supports the following text formats:

* xml 
* json

## Payment using card token

> Example:

```php
<?php
  require 'vendor/autoload.php';
  
  \Cloudipsp\Configuration::setMerchantId(1396424);
  \Cloudipsp\Configuration::setSecretKey('test');
  $recurringData = [
        'currency' => 'USD',
        'amount' => 1000,
        'rectoken' => 'token'
  ];
  $recurring_order = Cloudipsp\Payment::recurring($recurringData);
  var_dump($recurring_order->getData());
```      

```(array)``` <span class="green">getData()</span> - Returns payment info.

```(bool)``` <span class="green">isApproved()</span> - method to check if recurring is successful.

Required request Parameters:

Parameters      | Description                                                                                      
----------------|-------------------------------------------------------------------------------------------------------                                                   
```order_id```        | Order ID. Can be generated by SDK.                                                               
```merchant_id```     | Merchant unique ID.                                           
```order_desc```      | Order description. Generated by merchant in UTF-8. Can be generated by SDK.                       
```signature```       | Order signature. Required to verify merchant request consistency and authenticity. Can be generated by SDK.
```amount```	        | Order amount in cents without separator.
```currency```        | Order currency(USD, EUR, RUB and others).
```rectoken``` |	Card token â€” token to access card funds without cardholder interaction.

Host-to-host API supports the following text formats:

* xml 
* json
* form
